<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <meta name="theme-color" content="#fdfbf7">
  <title>Profile â€” Flean</title>
  <link rel="stylesheet" href="assets/styles.css">
</head>
<body data-page="profile" style="padding-bottom: 40px;">

  <!-- Back Button Header -->
  <div style="padding: 16px; background: var(--cream-50); position: sticky; top: 0; z-index: 100; backdrop-filter: blur(12px);">
    <button onclick="window.history.back()" style="display: flex; align-items: center; gap: 8px; font-size: 1rem; color: var(--charcoal); font-weight: 500;">
      <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M19 12H5M12 19l-7-7 7-7"/>
      </svg>
      Back
    </button>
  </div>

  <div class="profile-header">
    <div class="profile-avatar-large">
      <img src="assets/images/Salad Icon.png" alt="Priyam">
      <div class="edit-badge">âœï¸</div>
    </div>
    
    <h2 style="margin-bottom:4px; font-family: var(--font-body); font-size: 1.3rem;">Priyam</h2>
    <p style="font-size:0.85rem; color: var(--gray-neutral);">+91 98765 43210</p>
    
    <div class="stats-row">
      <div class="stat-item">
        <strong>Top 15%</strong>
        <span>Clean Eaters</span>
      </div>
      <div class="stat-item">
        <strong>12</strong>
        <span>Additives Avoided</span>
      </div>
      <div class="stat-item">
        <strong>4</strong>
        <span>Swaps Made</span>
      </div>
    </div>
  </div>

  <div class="badges-section">
    <h3 style="padding: 0 var(--space-lg); margin-bottom: var(--space-md);">Your Badges</h3>
    <div class="chip-row">
      <div class="badge-card">
        <div class="badge-icon">ğŸ›¡ï¸</div>
        <span>Label Reader</span>
      </div>
      <div class="badge-card">
        <div class="badge-icon">ğŸŒ¿</div>
        <span>Palm Oil Free</span>
      </div>
      <div class="badge-card locked">
        <div class="badge-icon">ğŸ’ª</div>
        <span>Protein Pro</span>
      </div>
      <div class="badge-card locked">
        <div class="badge-icon">ğŸ§ </div>
        <span>Smart Shopper</span>
      </div>
    </div>
  </div>

  <!-- Personalization Section (For Demo) -->
  <div id="personalizationSection" class="menu-list" style="margin-bottom: var(--space-md); display: none;">
    <div style="padding: 12px 20px; display: flex; align-items: center; gap: 10px; background: linear-gradient(135deg, #e6f4f1 0%, #d4edda 100%); border-radius: 12px 12px 0 0;">
      <span style="font-size: 1.3rem;">âœ¨</span>
      <div>
        <strong style="font-size: 0.9rem; color: var(--charcoal);">Your Preferences</strong>
        <p style="font-size: 0.75rem; color: var(--gray-neutral); margin-top: 2px;">Personalized experience active</p>
      </div>
    </div>
    <div id="currentPreferences" style="padding: 12px 20px; display: flex; flex-wrap: wrap; gap: 6px; background: white;">
      <!-- Injected by JS -->
    </div>
    <div class="menu-item" onclick="resetOnboarding()" style="color: var(--deep-green);">
      <span style="display:flex; align-items:center; gap:12px;">
        <span style="font-size:1.2rem">ğŸ”„</span> Re-personalize (Demo)
      </span>
      <span style="color:var(--sand-400)">â€º</span>
    </div>
  </div>

  <div class="menu-list">
    <div class="menu-item" onclick="window.location.href='orders.html'">
      <span style="display:flex; align-items:center; gap:12px;">
        <span style="font-size:1.2rem">ğŸ“¦</span> Your Orders
      </span>
      <span style="color:var(--sand-400)">â€º</span>
    </div>
    <div class="menu-item" onclick="window.location.href='addresses.html'">
      <span style="display:flex; align-items:center; gap:12px;">
        <span style="font-size:1.2rem">ğŸ“</span> Address Book
      </span>
      <span style="color:var(--sand-400)">â€º</span>
    </div>
    <div class="menu-item">
      <span style="display:flex; align-items:center; gap:12px;">
        <span style="font-size:1.2rem">ğŸ’³</span> Payments
      </span>
      <span style="color:var(--sand-400)">â€º</span>
    </div>
    <div class="menu-item">
      <span style="display:flex; align-items:center; gap:12px;">
        <span style="font-size:1.2rem">ğŸ</span> Refer & Earn
      </span>
      <span style="color:var(--deep-green); font-size:0.8rem; font-weight:700;">NEW</span>
    </div>
  </div>

  <div class="menu-list" style="margin-top:var(--space-md);">
    <div class="menu-item">
      <span style="display:flex; align-items:center; gap:12px;">
        <span style="font-size:1.2rem">ğŸ¥¬</span> About Flean
      </span>
      <span style="color:var(--sand-400)">â€º</span>
    </div>
    <div class="menu-item" style="color:var(--rose-dark);" onclick="localStorage.clear(); window.location.href='splash.html'">
      <span style="display:flex; align-items:center; gap:12px;">
        <span style="font-size:1.2rem">ğŸšª</span> Log Out
      </span>
    </div>
  </div>

  <p style="text-align:center; font-size:0.75rem; margin-top:32px; padding-bottom: 20px; color:var(--gray-neutral); opacity: 0.6;">
    Version 1.0.0 (Premium Build)
  </p>

  <script src="assets/script.js"></script>
  <script>
    // Profile-specific personalization display
    function initProfilePersonalization() {
      const prefs = JSON.parse(localStorage.getItem('userPreferences') || 'null');
      const section = document.getElementById('personalizationSection');
      const container = document.getElementById('currentPreferences');
      
      if (prefs && prefs.all && prefs.all.length > 0 && section && container) {
        section.style.display = 'block';
        
        const icons = {
          'Muscle Gain': 'ğŸ’ª', 'Weight Loss': 'âš–ï¸', 'Healthy Life': 'ğŸ§˜',
          'Keto': 'ğŸ¥‘', 'Intermittent': 'â°', 'Vegan': 'ğŸŒ±', 'Paleo': 'ğŸ¥©',
          'No Palm Oil': 'ğŸ›¡ï¸', 'No Added Sugar': 'ğŸ¬', 'Gluten Free': 'ğŸŒ¾'
        };
        
        container.innerHTML = prefs.all.map(p => `
          <span style="display: inline-flex; align-items: center; gap: 4px; padding: 6px 12px; background: #f0f9f4; border-radius: 20px; font-size: 0.75rem; font-weight: 600; color: var(--deep-green);">
            ${icons[p] || 'âœ“'} ${p}
          </span>
        `).join('');
      }
    }
    
    function resetOnboarding() {
      localStorage.removeItem('userPreferences');
      localStorage.removeItem('hasCompletedOnboarding');
      window.location.href = 'welcome.html';
    }
    
    // Run on page load
    document.addEventListener('DOMContentLoaded', initProfilePersonalization);
  </script>
</body>
</html>
