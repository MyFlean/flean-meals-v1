<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="theme-color" content="#0f6b52">
  <title>Order Confirmed â€” Flean</title>
  <link rel="stylesheet" href="assets/styles.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@500;600;700&family=Montserrat:wght@400;500;600;700&display=swap" rel="stylesheet">
  <style>
    .confirmation-page {
      min-height: 100vh;
      background: linear-gradient(135deg, var(--emerald-50) 0%, var(--bg-primary) 100%);
      padding-bottom: 100px;
    }
    
    .confirmation-hero {
      text-align: center;
      padding: 3rem 1.5rem;
    }
    
    /* Success Animation */
    .success-checkmark {
      width: 100px;
      height: 100px;
      margin: 0 auto 1.5rem;
      position: relative;
    }
    
    .success-checkmark .check-circle {
      width: 100px;
      height: 100px;
      border-radius: 50%;
      background: linear-gradient(135deg, var(--emerald-500) 0%, var(--emerald-700) 100%);
      display: flex;
      align-items: center;
      justify-content: center;
      animation: circle-pop 0.5s ease-out;
    }
    
    .success-checkmark .checkmark {
      width: 40px;
      height: 40px;
      stroke: white;
      stroke-width: 3;
      fill: none;
      animation: checkmark-draw 0.5s ease-out 0.3s forwards;
      stroke-dasharray: 50;
      stroke-dashoffset: 50;
    }
    
    @keyframes circle-pop {
      0% { transform: scale(0); }
      50% { transform: scale(1.1); }
      100% { transform: scale(1); }
    }
    
    @keyframes checkmark-draw {
      to { stroke-dashoffset: 0; }
    }
    
    /* Confetti */
    .confetti {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      overflow: hidden;
      z-index: 1000;
    }
    
    .confetti-piece {
      position: absolute;
      width: 10px;
      height: 10px;
      background: var(--emerald-500);
      animation: confetti-fall 3s ease-out forwards;
    }
    
    .confetti-piece:nth-child(2n) { background: var(--gold); }
    .confetti-piece:nth-child(3n) { background: var(--emerald-300); }
    .confetti-piece:nth-child(4n) { background: #ff6b6b; }
    
    @keyframes confetti-fall {
      0% { transform: translateY(-100px) rotate(0deg); opacity: 1; }
      100% { transform: translateY(100vh) rotate(720deg); opacity: 0; }
    }
    
    .confirmation-title {
      font-family: var(--font-serif);
      font-size: 1.75rem;
      font-weight: 700;
      color: var(--charcoal);
      margin-bottom: 0.5rem;
    }
    
    .confirmation-subtitle {
      font-size: 1rem;
      color: var(--slate-600);
    }
    
    .order-id {
      display: inline-block;
      margin-top: 1rem;
      padding: 0.5rem 1rem;
      background: var(--bg-card);
      border: 1px solid var(--slate-200);
      border-radius: var(--radius-lg);
      font-size: 0.9rem;
      font-weight: 600;
      color: var(--slate-700);
    }
    
    .confirmation-content { padding: 0 1.5rem; }
    
    /* ETA Card */
    .eta-card {
      background: var(--bg-card);
      border-radius: var(--radius-xl);
      padding: 1.5rem;
      text-align: center;
      border: 2px solid var(--emerald-200);
      margin-bottom: 1.5rem;
    }
    
    .eta-card .eta-icon {
      font-size: 2.5rem;
      margin-bottom: 0.75rem;
    }
    
    .eta-card h3 {
      font-size: 1.1rem;
      font-weight: 700;
      margin-bottom: 0.25rem;
    }
    
    .eta-card .eta-time {
      font-size: 1.5rem;
      font-weight: 800;
      color: var(--emerald-600);
    }
    
    /* Order Timeline */
    .order-timeline {
      background: var(--bg-card);
      border-radius: var(--radius-xl);
      padding: 1.5rem;
      margin-bottom: 1.5rem;
    }
    
    .order-timeline h3 {
      font-size: 1rem;
      font-weight: 700;
      margin-bottom: 1rem;
    }
    
    .timeline-steps {
      position: relative;
      padding-left: 2rem;
    }
    
    .timeline-steps::before {
      content: '';
      position: absolute;
      left: 7px;
      top: 0;
      bottom: 0;
      width: 2px;
      background: var(--slate-200);
    }
    
    .timeline-step {
      position: relative;
      padding-bottom: 1.25rem;
    }
    
    .timeline-step:last-child { padding-bottom: 0; }
    
    .timeline-step::before {
      content: '';
      position: absolute;
      left: -2rem;
      top: 0;
      width: 16px;
      height: 16px;
      border-radius: 50%;
      background: var(--slate-200);
      border: 2px solid var(--bg-card);
    }
    
    .timeline-step.done::before {
      background: var(--emerald-500);
    }
    
    .timeline-step.current::before {
      background: var(--emerald-500);
      box-shadow: 0 0 0 4px rgba(16, 185, 129, 0.2);
      animation: pulse 2s infinite;
    }
    
    @keyframes pulse {
      0%, 100% { box-shadow: 0 0 0 4px rgba(16, 185, 129, 0.2); }
      50% { box-shadow: 0 0 0 8px rgba(16, 185, 129, 0.1); }
    }
    
    .timeline-step h4 {
      font-size: 0.9rem;
      font-weight: 600;
      color: var(--charcoal);
    }
    
    .timeline-step p {
      font-size: 0.8rem;
      color: var(--slate-500);
    }
    
    .timeline-step.pending h4,
    .timeline-step.pending p {
      color: var(--slate-400);
    }
    
    /* Health Impact */
    .health-impact {
      background: linear-gradient(135deg, var(--emerald-600) 0%, var(--emerald-800) 100%);
      color: white;
      border-radius: var(--radius-xl);
      padding: 1.5rem;
      margin-bottom: 1.5rem;
    }
    
    .health-impact h3 {
      font-size: 1rem;
      font-weight: 700;
      margin-bottom: 1rem;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }
    
    .health-stats {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 1rem;
      text-align: center;
    }
    
    .health-stat .value {
      font-size: 1.5rem;
      font-weight: 800;
      display: block;
    }
    
    .health-stat .label {
      font-size: 0.75rem;
      opacity: 0.9;
    }
    
    /* Action Buttons */
    .confirmation-actions {
      display: flex;
      flex-direction: column;
      gap: 0.75rem;
    }
    
    .action-btn {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 0.5rem;
      padding: 1rem;
      border-radius: var(--radius-xl);
      font-size: 1rem;
      font-weight: 600;
      text-decoration: none;
      transition: all 0.2s ease;
    }
    
    .action-btn.primary {
      background: var(--emerald-600);
      color: white;
      box-shadow: 0 4px 16px rgba(5, 150, 105, 0.3);
    }
    
    .action-btn.secondary {
      background: var(--bg-card);
      color: var(--charcoal);
      border: 1px solid var(--slate-200);
    }
  </style>
</head>
<body class="confirmation-page">
  <!-- Confetti -->
  <div class="confetti" id="confetti"></div>

  <!-- Hero Section -->
  <section class="confirmation-hero">
    <div class="success-checkmark">
      <div class="check-circle">
        <svg class="checkmark" viewBox="0 0 40 40">
          <path d="M10 20 L17 27 L30 13" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </div>
    </div>
    <h1 class="confirmation-title">Order Confirmed!</h1>
    <p class="confirmation-subtitle">Your healthy groceries are on the way</p>
    <span class="order-id" id="orderId">Order #FL0000000</span>
  </section>

  <!-- Content -->
  <main class="confirmation-content">
    <!-- ETA Card -->
    <div class="eta-card">
      <span class="eta-icon">ðŸš´</span>
      <h3>Estimated Arrival</h3>
      <span class="eta-time">10-15 minutes</span>
    </div>

    <!-- Order Timeline -->
    <div class="order-timeline">
      <h3>ðŸ“¦ Order Status</h3>
      <div class="timeline-steps">
        <div class="timeline-step done">
          <h4>Order Confirmed</h4>
          <p>Just now</p>
        </div>
        <div class="timeline-step current">
          <h4>Being Packed</h4>
          <p>Your items are being carefully packed</p>
        </div>
        <div class="timeline-step pending">
          <h4>Out for Delivery</h4>
          <p>On the way to you</p>
        </div>
        <div class="timeline-step pending">
          <h4>Delivered</h4>
          <p>Enjoy your healthy groceries!</p>
        </div>
      </div>
    </div>

    <!-- Health Impact -->
    <div class="health-impact">
      <h3>ðŸŒ± Your Health Impact</h3>
      <div class="health-stats">
        <div class="health-stat">
          <span class="value" id="healthyItems">0</span>
          <span class="label">Healthy Items</span>
        </div>
        <div class="health-stat">
          <span class="value">+15</span>
          <span class="label">Flean Points</span>
        </div>
        <div class="health-stat">
          <span class="value" id="avgScore">0</span>
          <span class="label">Avg Score</span>
        </div>
      </div>
    </div>

    <!-- Actions -->
    <div class="confirmation-actions">
      <a href="orders.html" class="action-btn primary">
        Track Order â†’
      </a>
      <a href="index.html" class="action-btn secondary">
        Continue Shopping
      </a>
    </div>
  </main>

  <script src="assets/script.js"></script>
  <script>
    // Generate confetti
    function createConfetti() {
      const confettiContainer = document.getElementById('confetti');
      for (let i = 0; i < 50; i++) {
        const piece = document.createElement('div');
        piece.className = 'confetti-piece';
        piece.style.left = Math.random() * 100 + '%';
        piece.style.animationDelay = Math.random() * 2 + 's';
        piece.style.animationDuration = (2 + Math.random() * 2) + 's';
        confettiContainer.appendChild(piece);
      }
      
      // Remove confetti after animation
      setTimeout(() => confettiContainer.remove(), 5000);
    }
    
    // Display order info
    function displayOrderInfo() {
      const orderId = localStorage.getItem('lastOrderId') || 'FL' + Date.now().toString().slice(-7);
      document.getElementById('orderId').textContent = `Order #${orderId}`;
      
      // Get last order for stats
      const orders = JSON.parse(localStorage.getItem('fleanOrders') || '[]');
      const lastOrder = orders[0];
      
      if (lastOrder && lastOrder.items) {
        const healthyItems = lastOrder.items.filter(item => item.healthScore >= 70).length;
        const avgScore = Math.round(
          lastOrder.items.reduce((sum, item) => sum + item.healthScore, 0) / lastOrder.items.length
        );
        
        document.getElementById('healthyItems').textContent = healthyItems;
        document.getElementById('avgScore').textContent = avgScore + '/100';
      }
    }
    
    // Init
    document.addEventListener('DOMContentLoaded', () => {
      createConfetti();
      displayOrderInfo();
    });
  </script>
</body>
</html>

